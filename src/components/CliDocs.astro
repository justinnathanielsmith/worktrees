---
import CodeBlock from './CodeBlock.astro';
---

<section class="py-24 space-y-32 container mx-auto px-4">
    <!-- Header -->
    <div class="max-w-4xl fade-in">
        <h1 class="text-4xl md:text-6xl font-bold text-white mb-8 leading-none">
            CLI Tool <br>
            <span class="text-blue-500">Manual</span>
        </h1>
        <p class="text-xl text-slate-400 font-mono tracking-tight leading-relaxed border-l-4 border-blue-500 pl-6">
            The <code>worktree</code> CLI is a high-performance Rust tool designed to manage the Bare Hub architecture. 
            It features a rich Terminal User Interface (TUI) for rapid navigation and Git operations.
        </p>
    </div>

    <div class="fade-in space-y-12">
        <div class="flex items-center gap-4">
            <span class="text-blue-500 font-bold text-2xl">01</span>
            <h2 class="text-3xl font-bold text-white tracking-wide">Installation</h2>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <div class="space-y-6">
                <h3 class="text-lg font-bold text-slate-200">macOS / Linux</h3>
                <p class="text-slate-400 text-sm leading-relaxed">
                    Install via the official shell script. This will download the latest binary for your architecture and add it to your PATH.
                </p>
                <CodeBlock code={`curl --proto '=https' --tlsv1.2 -LsSf https://github.com/justinnathanielsmith/worktrees/releases/latest/download/worktree-installer.sh | sh`} label="Shell" />
            </div>

            <div class="space-y-6">
                <h3 class="text-lg font-bold text-slate-200">Windows</h3>
                <p class="text-slate-400 text-sm leading-relaxed">
                    Run the PowerShell installer to fetch the latest release for Windows.
                </p>
                <CodeBlock code={`powershell -ExecutionPolicy ByPass -c "irm https://github.com/justinnathanielsmith/worktrees/releases/latest/download/worktree-installer.ps1 | iex"`} label="PowerShell" />
            </div>
        </div>

        <div class="pt-8 border-t border-slate-800">
            <h3 class="text-lg font-bold text-slate-200 mb-4">Other Methods</h3>
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <div class="space-y-2">
                    <p class="text-slate-400 text-sm">Build from source using Cargo:</p>
                    <CodeBlock code={`cargo install --git https://github.com/justinnathanielsmith/worktrees`} label="Cargo" />
                </div>
                <div class="space-y-2">
                    <p class="text-slate-400 text-sm">Download pre-built binaries manually:</p>
                    <a href="https://github.com/justinnathanielsmith/worktrees/releases" class="text-blue-500 hover:text-blue-400 transition-colors text-sm font-mono tracking-tight">
                        github.com/justinnathanielsmith/worktrees/releases â†’
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- 02. CLI Commands -->
    <div class="fade-in space-y-12">
        <div class="flex items-center gap-4">
            <span class="text-slate-400 font-bold text-2xl">02</span>
            <h2 class="text-3xl font-bold text-white tracking-wide">CLI Commands</h2>
        </div>

        <div class="grid grid-cols-1 gap-6">
            <div class="bg-slate-900 border border-slate-800 rounded-xl overflow-hidden">
                <table class="w-full text-left text-sm">
                    <thead class="bg-slate-800 text-slate-300 tracking-widest uppercase text-xs">
                        <tr>
                            <th class="px-6 py-4">Command</th>
                            <th class="px-6 py-4">Arguments</th>
                            <th class="px-6 py-4">Description</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-800 text-slate-400 font-mono">
                        <tr>
                            <td class="px-6 py-4 text-blue-400">init</td>
                            <td class="px-6 py-4">&lt;url&gt; [name]</td>
                            <td class="px-6 py-4">Clone a repo as a bare repository and set up the .bare directory.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-blue-400">add</td>
                            <td class="px-6 py-4">&lt;name&gt; [branch]</td>
                            <td class="px-6 py-4">Create a new worktree. If branch is omitted, it defaults to the name.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-blue-400">remove</td>
                            <td class="px-6 py-4">&lt;name&gt;</td>
                            <td class="px-6 py-4">Remove a worktree and its directory.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-blue-400">list</td>
                            <td class="px-6 py-4">-</td>
                            <td class="px-6 py-4">Launch the interactive TUI to manage worktrees.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-blue-400">run</td>
                            <td class="px-6 py-4">&lt;intent&gt; &lt;command&gt;</td>
                            <td class="px-6 py-4">Run a command in a temporary worktree and remove it afterward.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-blue-400">sync</td>
                            <td class="px-6 py-4">[intent]</td>
                            <td class="px-6 py-4">Synchronize configuration files to a specific worktree or all worktrees.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-blue-400">push</td>
                            <td class="px-6 py-4">[intent]</td>
                            <td class="px-6 py-4">Push changes to the remote repository.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-blue-400">clean</td>
                            <td class="px-6 py-4">[--artifacts] [--dry-run]</td>
                            <td class="px-6 py-4">Remove stale worktrees or purge build artifacts (node_modules, target, etc.) from inactive environments.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-blue-400">switch</td>
                            <td class="px-6 py-4">&lt;name&gt;</td>
                            <td class="px-6 py-4">Print worktree path to stdout for shell integration (e.g., <code>cd $(worktree switch dev)</code>).</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-blue-400">setup</td>
                            <td class="px-6 py-4">-</td>
                            <td class="px-6 py-4">Opinionated setup: creates 'main' and 'dev' worktrees automatically.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-blue-400">config</td>
                            <td class="px-6 py-4">set-key &lt;key&gt;</td>
                            <td class="px-6 py-4">Securely store your Gemini API key for AI features.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-blue-400">convert</td>
                            <td class="px-6 py-4">[--name] [--branch]</td>
                            <td class="px-6 py-4">Convert an existing standard repository into a Bare Hub structure.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-blue-400">checkout</td>
                            <td class="px-6 py-4">&lt;intent&gt; &lt;branch&gt;</td>
                            <td class="px-6 py-4">Switch an existing worktree to a different branch.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-blue-400">open</td>
                            <td class="px-6 py-4">-</td>
                            <td class="px-6 py-4">Generate and display a Warp Launch Configuration for the current project.</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-blue-400">completions</td>
                            <td class="px-6 py-4">&lt;shell&gt;</td>
                            <td class="px-6 py-4">Generate shell completion scripts (support for zsh, bash, fish, powershell).</td>
                        </tr>
                        <tr>
                            <td class="px-6 py-4 text-blue-400">config</td>
                            <td class="px-6 py-4">set-key &lt;key&gt;</td>
                            <td class="px-6 py-4">Securely store your Gemini API key (mode 0o600).</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <!-- 03. TUI Worktree Manager -->
    <div class="fade-in space-y-12">
        <div class="flex items-center gap-4">
            <span class="text-blue-500 font-bold text-2xl">03</span>
            <h2 class="text-3xl font-bold text-white tracking-wide">Interactive TUI</h2>
        </div>

        <p class="text-slate-300 leading-relaxed">
            The TUI uses a <strong>Modal System</strong> (Vibe Engineering) to keep the interface clean and context-aware. 
            Modes are indicated by distinct border colors.
        </p>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Normal Mode -->
             <div class="bg-slate-900 border border-slate-800 rounded-xl p-6 relative overflow-hidden group hover:border-cyan-500/50 transition-colors duration-300">
                <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                    <span class="text-6xl text-cyan-500 font-black">N</span>
                </div>
                <h3 class="text-xl font-bold text-cyan-400 mb-6 border-b border-slate-800 pb-2">Normal Mode (Cyan)</h3>
                <ul class="space-y-4 text-sm font-mono text-slate-400">
                    <li class="flex justify-between"><span>Navigate</span> <span class="text-white">j / k</span></li>
                    <li class="flex justify-between"><span>Open Editor</span> <span class="text-white">Enter</span></li>
                    <li class="flex justify-between"><span>View Status</span> <span class="text-white">v</span></li>
                    <li class="flex justify-between"><span>View History</span> <span class="text-white">l</span></li>
                    <li class="flex justify-between"><span>Manage Mode</span> <span class="text-magenta-400">m</span></li>
                    <li class="flex justify-between"><span>Git Mode</span> <span class="text-green-400">g</span></li>
                    <li class="flex justify-between"><span>Filter Mode</span> <span class="text-yellow-400">/</span></li>
                    <li class="flex justify-between"><span>Quit</span> <span class="text-pink-500">q</span></li>
                </ul>
            </div>

            <!-- Manage Mode -->
            <div class="bg-slate-900 border border-slate-800 rounded-xl p-6 relative overflow-hidden group hover:border-fuchsia-500/50 transition-colors duration-300">
                <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                    <span class="text-6xl text-fuchsia-500 font-black">M</span>
                </div>
                <h3 class="text-xl font-bold text-fuchsia-400 mb-6 border-b border-slate-800 pb-2">Manage Mode (Magenta)</h3>
                <ul class="space-y-4 text-sm font-mono text-slate-400">
                    <li class="flex justify-between"><span>Add Worktree</span> <span class="text-white">a</span></li>
                    <li class="flex justify-between"><span>Delete</span> <span class="text-pink-500">d</span></li>
                    <li class="flex justify-between"><span>Force Delete</span> <span class="text-pink-500 font-bold">D</span></li>
                    <li class="flex justify-between"><span>Clean Stale</span> <span class="text-white">c</span></li>
                    <li class="flex justify-between"><span>Clean Artifacts</span> <span class="text-pink-500">C</span></li>
                    <li class="flex justify-between"><span>Back</span> <span class="text-slate-500">Esc</span></li>
                </ul>
            </div>

             <!-- Git Mode -->
             <div class="bg-slate-900 border border-slate-800 rounded-xl p-6 relative overflow-hidden group hover:border-green-500/50 transition-colors duration-300">
                <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                    <span class="text-6xl text-green-500 font-black">G</span>
                </div>
                <h3 class="text-xl font-bold text-green-400 mb-6 border-b border-slate-800 pb-2">Git Mode (Green)</h3>
                <ul class="space-y-4 text-sm font-mono text-slate-400">
                    <li class="flex justify-between"><span>Pull Remote</span> <span class="text-white">p</span></li>
                    <li class="flex justify-between"><span>Push Remote</span> <span class="text-white">P</span></li>
                    <li class="flex justify-between"><span>Sync Configs</span> <span class="text-white">s</span></li>
                    <li class="flex justify-between"><span>Fetch</span> <span class="text-white">f</span></li>
                    <li class="flex justify-between"><span>Rebase</span> <span class="text-white">R</span></li>
                    <li class="flex justify-between"><span>Back</span> <span class="text-slate-500">Esc</span></li>
                </ul>
            </div>

             <!-- Filter Mode -->
            <div class="bg-slate-900 border border-slate-800 rounded-xl p-6 relative overflow-hidden group hover:border-yellow-500/50 transition-colors duration-300">
                <div class="absolute top-0 right-0 p-4 opacity-10 group-hover:opacity-20 transition-opacity">
                    <span class="text-6xl text-yellow-500 font-black">F</span>
                </div>
                <h3 class="text-xl font-bold text-yellow-400 mb-6 border-b border-slate-800 pb-2">Filter Mode (Yellow)</h3>
                <div class="space-y-4 text-sm text-slate-400">
                    <p>
                        Type instantly to fuzzy-match worktrees by branch name or path.
                    </p>
                    <ul class="space-y-4 text-sm font-mono text-slate-400 mt-4">
                        <li class="flex justify-between"><span>Select</span> <span class="text-white">Enter</span></li>
                        <li class="flex justify-between"><span>Clear/Back</span> <span class="text-slate-500">Esc</span></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
